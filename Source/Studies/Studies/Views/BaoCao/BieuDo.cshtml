@{
    ViewBag.Title = "BieuDo";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}

<div class="page-header page-header-default">
    <div class="page-header-content" style="background-color: #fcfcfc;">
        <div class="page-title" style="padding: 20px 0;">
            <h4>
                <a href="javascript:void(0);" onclick="history.go(-1);"><i class="icon-arrow-left52 position-left"></i></a>
                <span class="text-semibold">Báo cáo</span> - Biểu đồ tháng năm
            </h4>
        </div>
    </div>
</div>
<div class="div-h100 div-top69">
    <div class="panel-body div-h100-body">
        <div class="well chart-container">
            <div class="chart" id="c3-line-chart"></div>
        </div>
    </div>
</div>

<script>
    $(function () {
        let data = @Html.Raw(Json.Encode(Model));
        let arr = [
            ['Doanh thu'],
            ['Chi Phí'],
            ['Lợi nhuận']
        ];
        console.log(data);
        for(let i=data.length - 1;i>=0;i--){
            arr[0].push(data[i].Revenue);
            arr[1].push(data[i].Cost);
            arr[2].push(data[i].Revenue - data[i].Cost);
        }
        var line_chart = c3.generate({
            bindto: '#c3-line-chart',
            point: {
                r: 4
            },
            size: {
                height: 400
            },
            color: {
                pattern: ['#4CAF50', '#F4511E', '#1E88E5']
            },
            data: {
                columns: arr,
                type: 'spline'
            },
            grid: {
                y: {
                    show: true
                }
            }
        });

        $(".sidebar-control").on('click', function () {
            line_chart.resize();
            chart_line_regions.resize();
            area_chart.resize();
            area_stacked_chart.resize();
            step_chart.resize();
        });
    });
</script>